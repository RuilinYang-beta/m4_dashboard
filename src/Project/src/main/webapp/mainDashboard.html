<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <title>Cofano</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <meta name="google-signin-client_id" content="1091558818942-rg9l51ago89jkc0lu0en435vpafi3k5o.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  <script src="sql_counter.js"></script>

  <script type="text/javascript" src="chart.js"></script>
   <!-- geoMap-->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
  <link rel="stylesheet" href="geoMap.css">
 
  <style>
  body {
      margin: 0;
      padding: 0;
      background-image: url(container.jpg);
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
      background-attachment: fixed;
    }
  
   .g-signin2 {
      display: none;
  }
  </style>
</head>

<body id='mainDashboard' onload="getCount" >

    <div class=row> 

      <div class="counter">

        <div class="logo">
          <img src="cofano2.png" height="100">
        </div>

  <a class="btn" href="filterPage.html">
        <div class="row">
          <div class="counting-sec">
            <div class="num" id="numcount">0</div>
          </div>
          
           <div class="col">a
           
           </div>
       <div class="col content-container-fluid">
        <div class="filterGraphs">
          <canvas id="container5"></canvas>
        </div>
       </div>

        </div>
</a>

       <div class=# >
          <div class="mapGraph">
            <div class="map" id='geoParent' style='width:50%'>
                <div id="sliderContainer">
                  <input id="timeslide" class='slider' type="range" min="0" max="1468" value="0" step="1"/><br>
                  <span id="range">2013-03-02</span>
                </div>

                <div id='mapContainer'>
                </div>
            </div>

        </div>


      </div>
    </div>
  </div>

<div class="g-signin2" data-onsuccess="onSignIn" data-width="300" data-height="50" data-longtitle="true"></div>

<script>
function onSignIn(googleUser) {
  var profile=googleUser.getBasicProfile();
  $("#pic").attr('src',profile.getImageUrl());
  $("#email").text(profile.getEmail());
  $("#name").text(profile.getName());

  var id_token = googleUser.getAuthResponse().id_token;
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=' + id_token);
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onload = function() {
    console.log('Signed in as: ' + xhr.responseText);
    var json = xhr.responseText;
    var obj = JSON.parse(json);
    if (obj.hd !== 'student.utwente.nl') {
        window.location = "http://localhost:8080/Project/"
    }
        };
  xhr.send('idtoken=' + id_token);

}


function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      window.location = "http://localhost:8080/Project/"
      console.log('User signed out.');
    });
  }
</script>
</body>

<script type="text/javascript">
 function countit() {
  $(".num").counterUp({
      delay: 30,
      time: 1000
    });
  };
  $(getCount());
  $(chart1());

  
</script>

  <!-- geoMap -->
  <script type="text/javascript" src="geoMap.js"></script>

</html>
